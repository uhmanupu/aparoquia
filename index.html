<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚õ™ Sacristia - Agenda Paroquial Dezembro 2025</title>
    <!-- Tailwind CSS CDN para um layout responsivo e moderno -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Configura√ß√£o Tailwind para cores lit√∫rgicas e tema escuro
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'background-dark': '#0a0a14',
                        'card-dark': '#141424',
                        'element-dark': '#2a2a4a',
                        'highlight-gold': 'gold',
                        'priest-blue': '#4fc3f7',
                        // Mapeamento de Cores Lit√∫rgicas
                        'lit-roxo': '#6f42c1',
                        'lit-branco': '#ffffff',
                        'lit-rosa': '#e83e8c',
                        'lit-vermelho': '#dc3545',
                        'lit-verde': '#28a745', // Adicionado Verde
                    }
                }
            }
        }
    </script>
    <style>
        /* Estilo customizado para o carrossel e scrollbar (apenas visual) */
        #date-carousel {
            -webkit-overflow-scrolling: touch; /* Melhora o scroll em iOS */
            scrollbar-width: none; /* Firefox */
            scroll-behavior: smooth;
        }
        #date-carousel::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        /* Estilo para garantir que o cont√™iner de dia caiba na tela m√≥vel */
        .date-item.selected {
            animation: pulse-ring 0.6s ease-out;
        }

        @keyframes pulse-ring {
            0% { box-shadow: 0 0 0 0px rgba(255, 215, 0, 0.7); }
            100% { box-shadow: 0 0 0 4px rgba(255, 215, 0, 0); }
        }
    </style>
</head>
<body class="bg-background-dark text-white p-2 sm:p-4 font-sans min-h-screen">

<div id="app-container" class="max-w-4xl mx-auto bg-card-dark p-4 md:p-8 rounded-xl shadow-2xl">
    <h1 class="text-center text-2xl md:text-3xl text-highlight-gold mb-6 font-extrabold tracking-wide">
        ‚õ™ Sacristia - Agenda Paroquial Dezembro 2025
    </h1>

    <!-- CARROSSEL DE DATAS DESLIZANTE -->
    <div id="date-carousel" class="flex overflow-x-scroll snap-x snap-mandatory pb-4 mb-4 space-x-3">
        <!-- Itens de data ser√£o gerados dinamicamente aqui -->
    </div>

    <!-- CONTE√öDO POR DIA -->
    <div id="daily-content-container" class="mt-6">
        <!-- O conte√∫do da agenda e tarefas √© carregado aqui com base no dia selecionado -->
        <p class="text-center text-gray-400">Carregando a agenda...</p>
    </div>

    <!-- Relat√≥rio -->
    <div class="bg-element-dark p-4 rounded-lg shadow-inner mt-8">
        <button id="generate-report" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 shadow-md">
            üìä Gerar Relat√≥rio de Tarefas
        </button>
        <div class="mt-4 p-4 bg-gray-900 border border-gray-700 rounded-lg text-sm text-green-300 whitespace-pre-wrap hidden" id="report-output">
            Nenhum dado registrado ainda.
        </div>
    </div>
</div>

<script>
    // Configura√ß√µes de M√™s/Ano e Dados
    const MONTH_DAY_COUNT = 31;
    const MONTH_INDEX = 11; // 0 = Janeiro, 11 = Dezembro
    const YEAR = 2025;
    const MONTH_NAME = "Dezembro";
    const weekDays = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];

    // Estrutura de Dados (Data √© centralizada aqui e n√£o mais no HTML)
    const dailySchedule = {
        // Dia 01
        "01": {
            liturgia: { text: "2¬™-feira da 1¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "4¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar, Lavar banheiro sacristia, Lavar alfaia e toalhas, Higienizar vasos" },
                { nome: "Pietro", desc: "Varrer passeio da matriz, Lavar banheiro social, Passar alfaia, Mala de missas, Higienizar vasos das malas, Aguar jardim" },
            ]
        },
        // Dia 02
        "02": {
            liturgia: { text: "S. Crom√°cio de Aquileia (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Morangal", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "5¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores, Higienizar vasos" },
                { nome: "Pietro", desc: "Manter trancado (exceto quinta), Passar t√∫nicas, Mala de missas, Higienizar vasos das malas" },
            ]
        },
        // Dia 03
        "03": {
            liturgia: { text: "S. Francisco Xavier (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 6 ‚Äì Bairro Torres", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "6¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz, Limpar imagens e altares (1¬™/3¬™ quarta), Passar alfaia, Arm√°rio sacristia, Higienizar vasos, Aguar jardim" },
            ]
        },
        // Dia 04
        "04": {
            liturgia: { text: "5¬™-feira da 1¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Visita aos enfermos", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Vargem Alegre ‚Äì Formatura", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "7¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro, escadaria e batist√©rio, Passar vestes de leitores e toalha do altar, Higienizar vasos" },
                { nome: "Pietro", desc: "Varrer passeio da matriz, Manter trancado (exceto hoje), Limpar imagens e altares, Passar alfaia, Mala de missas, Higienizar vasos, Aguar jardim" },
            ]
        },
        // Dia 05
        "05": {
            liturgia: { text: "S. Sabas (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "8¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
                { hora: "-----", atividade: "Compromisso", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar, Lavar banheiro sacristia, Lavar alfaia e toalhas, Higieniza√ß√£o geral dos vasos sagrados" },
                { nome: "Pietro", desc: "Lavar banheiro social, Passar alfaia, Mala de missas, Higienizar vasos das malas, Aguar jardim" },
            ]
        },
        // Dia 06
        "06": {
            liturgia: { text: "S√°bado da 1¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "11:00", atividade: "Casamento - Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Vig√≠lia Batismal", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "9¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim, Higienizar vasos" },
                { nome: "Pietro", desc: "Varrer passeio da matriz (jogar √°gua), Passar alfaia, Mala de missas, Higienizar vasos das malas" },
            ]
        },
        // Dia 07
        "07": {
            liturgia: { text: "2¬∫ Domingo do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "08:00", atividade: "Santa Missa Setor 6 ‚Äì Bairro S√£o Jos√© da Mantiqueira - Confiss√£o Crismando", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Batizado ‚Äì Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:30", atividade: "Santa Missa Setor 7 ‚Äì Bairro Rio Acima II", padre: "Pe. Erick" },
                { hora: "16:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Retirinho", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Primeiras V√©speras", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 08
        "08": {
            liturgia: { text: "Imaculada Concei√ß√£o de Maria Sant√≠ssima (Solenidade)", color: "lit-branco" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Roseirinha", padre: "Pe. Erick" },
                { hora: "10:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Aylton" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar (se n√£o for folga)" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 09
        "09": {
            liturgia: { text: "S. Juan Diego Cuauhtlatoatzin (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 3 ‚Äì Bairro Corr√™ias", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { nome: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 10
        "10": {
            liturgia: { text: "S. Daniel de C√∫ria (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Palmeiras", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 11
        "11": {
            liturgia: { text: "S. Damaso I, Papa (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos - Bairro Marques", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Marques", padre: "Pe. Erick" },
                { hora: "17:00", atividade: "Confiss√£o ‚Äì Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Adora√ß√£o ‚Äì Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 12
        "12": {
            liturgia: { text: "S. Bibiano (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "15:00", atividade: "Confiss√µes crismandos ‚Äì Bairro Roseirinha", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Serra Verde", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 2 ‚Äì Bairro Ribeir√£o", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Lavar banheiro social" },
            ]
        },
        // Dia 13
        "13": {
            liturgia: { text: "S. Luciana (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "05:00", atividade: "Prociss√£o e Santa Missa Igreja Santa Luzia", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos - Bairro Serra Verde", padre: "Pe. Erick" },
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 14
        "14": {
            liturgia: { text: "3¬∫ Domingo do Advento (Gaudete)", color: "lit-rosa" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Setor 3 ‚Äì Bairro Mogiano", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "11:00", atividade: "Santa Missa Hotel", padre: "Pe. Erick" },
                { hora: "18:00", atividade: "Santa Missa Setor 4 ‚Äì Bairro Moreiras", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 15
        "15": {
            liturgia: { text: "Jubileu Paroquial", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Visita peregrina da Imagem N. Sra da Concei√ß√£o e Santa Missa", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 16
        "16": {
            liturgia: { text: "S. Nicolau de Mira (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Mendes", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Forma√ß√£o MESC", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { nome: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 17
        "17": {
            liturgia: { text: "S. L√∫cia (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 18
        "18": {
            liturgia: { text: "S. Fl√°vio (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "17:00", atividade: "Confiss√µes Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Adora√ß√£o Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Muqu√©m", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 19
        "19": {
            liturgia: { text: "S. Jo√£o Damasceno (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 2 ‚Äì Bairro Porto", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Pouso Frio", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Lavar banheiro social" },
            ]
        },
        // Dia 20
        "20": {
            liturgia: { text: "S. Eg√≠dio (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "10:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Virgem do Socorro", padre: "Pe. Erick" },
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 21
        "21": {
            liturgia: { text: "4¬∫ Domingo do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Retiro dos Marins", padre: "Pe. Erick" },
                { hora: "11:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Retirinho", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Santa Missa Setor 4 ‚Äì Bairro Moreiras", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 22
        "22": {
            liturgia: { text: "S. Francisco de Sales (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 23
        "23": {
            liturgia: { text: "S. Tom√°s de Villanueva (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Marques", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { nome: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 24
        "24": {
            liturgia: { text: "V√©spera de Natal", color: "lit-roxo" },
            agenda: [
                { hora: "17:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 6 ‚Äì Bairro S√£o Jos√© da Mantiqueira", padre: "Pe. Edimilson" },
                { hora: "20:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "21:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Roseirinha", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 25
        "25": {
            liturgia: { text: "Natal do Senhor", color: "lit-branco" },
            agenda: [
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Rio Acima II", padre: "Pe. Erick" },
                { hora: "11:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Mendes", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 26
        "26": {
            liturgia: { text: "S. Estev√£o, Protom√°rtir (Mem√≥ria)", color: "lit-vermelho" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Sagrado Cora√ß√£o de Jesus", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Roseira", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Lavar banheiro social" },
            ]
        },
        // Dia 27
        "27": {
            liturgia: { text: "S. Jo√£o, Ap√≥stolo e Evangelista (Festa)", color: "lit-branco" },
            agenda: [
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "18:00", atividade: "Santa Missa Hotel", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 28
        "28": {
            liturgia: { text: "Santos Inocentes (Mem√≥ria)", color: "lit-vermelho" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Setor 3 ‚Äì Bairro Corr√™ias", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Rio Acima II", padre: "Pe. Erick" },
                { hora: "16:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Retirinho", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 29
        "29": {
            liturgia: { text: "S. Pedro Can√≠sio, Presb√≠tero e Doutor da Igreja (Mem√≥ria)", color: "lit-branco" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 30
        "30": {
            liturgia: { text: "S. Silvestre I, Papa (Mem√≥ria)", color: "lit-branco" },
            agenda: [
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Palmeiras", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { nome: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 31
        "31": {
            liturgia: { text: "Sagrada Fam√≠lia de Jesus, Maria e Jos√© (Festa)", color: "lit-branco" },
            agenda: [
                { hora: "17:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:30", atividade: "Adora√ß√£o Igreja Matriz", padre: "Pe. Erick" },
                { hora: "19:30", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "19:30", atividade: "Santa Missa Setor 7 ‚Äì Bairro Vargem Alegre", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
    };

    // --- FUN√á√ïES DE RENDERIZA√á√ÉO E NAVEGA√á√ÉO ---

    /**
     * Retorna as classes Tailwind para a cor lit√∫rgica.
     * @param {string} colorKey Chave da cor lit√∫rgica (ex: 'lit-roxo')
     * @returns {string} Classes Tailwind
     */
    function getLiturgicalColorClasses(colorKey) {
        switch (colorKey) {
            case 'lit-roxo': return 'bg-lit-roxo text-white';
            case 'lit-branco': return 'bg-lit-branco text-gray-900 shadow-lg';
            case 'lit-rosa': return 'bg-lit-rosa text-white';
            case 'lit-vermelho': return 'bg-lit-vermelho text-white';
            case 'lit-verde': return 'bg-lit-verde text-white';
            default: return 'bg-gray-800 text-white';
        }
    }

    /**
     * Constr√≥i o HTML do carrossel de datas e insere na p√°gina.
     */
    function renderDateCarousel(todayDay) {
        const carousel = document.getElementById('date-carousel');
        carousel.innerHTML = ''; // Limpa o conte√∫do
        
        // Determina o primeiro dia do m√™s de Dezembro (Segunda-feira)
        const firstDayOfMonth = new Date(YEAR, MONTH_INDEX, 1); 

        for (let day = 1; day <= MONTH_DAY_COUNT; day++) {
            const date = new Date(YEAR, MONTH_INDEX, day);
            const dayOfWeekIndex = date.getDay();
            const dayOfWeekShort = weekDays[dayOfWeekIndex];
            const dayString = day.toString().padStart(2, '0');

            // Determina se √© o dia atual (Verifica se est√° no m√™s e ano corretos)
            const isToday = (day === todayDay) && (date.getMonth() === MONTH_INDEX) && (date.getFullYear() === YEAR);
            
            // Classes para o item do carrossel
            const selectedClass = isToday ? 'selected' : '';
            const todayClasses = isToday ? 'bg-highlight-gold text-gray-900 ring-2 ring-highlight-gold ring-offset-2 ring-offset-card-dark' : 'bg-element-dark text-gray-300 hover:bg-gray-700';
            const snapClass = 'snap-start';

            const itemHtml = `
                <div id="date-${dayString}"
                     class="date-item ${snapClass} ${selectedClass}
                            min-w-[80px] text-center px-2 py-3 rounded-xl cursor-pointer transition-all duration-200
                            font-semibold text-sm shadow-md flex-shrink-0
                            ${todayClasses}"
                     data-dia="${dayString}">
                    <div class="text-xl">${dayString}</div>
                    <div class="text-xs font-normal">${dayOfWeekShort}</div>
                </div>
            `;
            carousel.insertAdjacentHTML('beforeend', itemHtml);
        }

        // Adiciona listeners de clique ap√≥s a renderiza√ß√£o
        document.querySelectorAll('.date-item').forEach(btn => {
            btn.addEventListener('click', function() {
                const day = this.getAttribute('data-dia');
                showDailyContent(day);
                // Rola para centralizar o dia clicado
                scrollToCenter(this);
            });
        });

        // Foca e exibe o conte√∫do do dia atual ao iniciar
        if (todayDay) {
            const todayElement = document.getElementById(`date-${todayDay.toString().padStart(2, '0')}`);
            if (todayElement) {
                showDailyContent(todayDay.toString().padStart(2, '0'));
                // Espera um momento para garantir que a renderiza√ß√£o inicial terminou
                setTimeout(() => scrollToCenter(todayElement), 150);
            }
        }
    }

    /**
     * Rola o carrossel para centralizar o elemento selecionado (usado para Mobile).
     * @param {HTMLElement} element O elemento a ser centralizado.
     */
    function scrollToCenter(element) {
        const container = document.getElementById('date-carousel');
        const containerWidth = container.offsetWidth;
        const elementWidth = element.offsetWidth;
        const elementOffset = element.offsetLeft;

        // Calcula a posi√ß√£o de scroll para centralizar
        const scrollPosition = elementOffset - (containerWidth / 2) + (elementWidth / 2);

        container.scrollTo({
            left: scrollPosition,
            behavior: 'smooth'
        });
    }


    /**
     * Constr√≥i e exibe o conte√∫do de um dia espec√≠fico.
     * @param {string} dayString O dia (ex: '01', '15').
     */
    function showDailyContent(dayString) {
        const container = document.getElementById('daily-content-container');

        const dayData = dailySchedule[dayString];

        // 1. Atualiza a sele√ß√£o visual do carrossel
        document.querySelectorAll('.date-item').forEach(b => {
            b.classList.remove('selected', 'bg-highlight-gold', 'text-gray-900', 'ring-2', 'ring-offset-2', 'ring-offset-card-dark');
            b.classList.add('bg-element-dark', 'text-gray-300');
        });

        const selectedBtn = document.getElementById(`date-${dayString}`);
        if (selectedBtn) {
            selectedBtn.classList.add('selected', 'bg-highlight-gold', 'text-gray-900', 'ring-2', 'ring-offset-2', 'ring-offset-card-dark');
            selectedBtn.classList.remove('bg-element-dark', 'text-gray-300', 'hover:bg-gray-700');
        }

        if (!dayData) {
            container.innerHTML = `<p class="text-center text-red-400 mt-8">Nenhuma agenda encontrada para o dia ${dayString} de ${MONTH_NAME}.</p>`;
            return;
        }

        // 2. Header Lit√∫rgico
        const colorClasses = getLiturgicalColorClasses(dayData.liturgia.color);
        const headerHtml = `
            <div class="p-4 md:p-5 mb-6 rounded-xl font-bold text-center text-lg shadow-xl ${colorClasses}">
                ${dayData.liturgia.text}
            </div>
        `;

        // 3. Tabela de Agenda
        let agendaTableHtml = `
            <h2 class="text-xl font-bold text-highlight-gold mb-3 border-b border-gray-700 pb-1">Agenda do Dia</h2>
            <div class="overflow-x-auto rounded-xl shadow-lg border border-gray-700">
                <table class="min-w-full text-sm">
                    <thead>
                        <tr class="bg-gray-700 text-highlight-gold">
                            <th class="p-3 whitespace-nowrap">Hora</th>
                            <th class="p-3">Atividade</th>
                            <th class="p-3">Padre</th>
                            <th class="p-3 text-center">Feito?</th>
                        </tr>
                    </thead>
                    <tbody>
        `;

        dayData.agenda.forEach((item, index) => {
            const taskId = `ag-${dayString}-${index + 1}`;
            const isChecked = localStorage.getItem(taskId) === 'true';
            const checkText = isChecked ? '‚úì' : '‚òê';
            const checkClass = isChecked ? 'checked bg-green-600' : 'bg-gray-600';

            const rowClass = index % 2 === 0 ? 'bg-gray-800' : 'bg-gray-900';
            const highlightClass = item.highlight ? 'bg-yellow-900 text-highlight-gold font-semibold' : '';

            agendaTableHtml += `
                <tr class="${rowClass} hover:bg-gray-700 transition duration-150">
                    <td class="p-3 whitespace-nowrap">${item.hora}</td>
                    <td class="p-3 ${highlightClass} text-base">${item.atividade}</td>
                    <td class="p-3 text-priest-blue font-semibold whitespace-nowrap">${item.padre}</td>
                    <td class="p-3 w-1/12 text-center">
                        <div class="check-btn w-7 h-7 mx-auto ${checkClass} rounded-full text-white flex items-center justify-center text-xs ring-1 ring-gray-500 cursor-pointer" data-id="${taskId}">
                            ${checkText}
                        </div>
                    </td>
                </tr>
            `;
        });

        agendaTableHtml += `
                    </tbody>
                </table>
            </div>
        `;

        // 4. Se√ß√£o de Tarefas da Sacristia
        let tasksSectionHtml = `
            <div class="bg-gray-800 p-4 rounded-xl shadow-lg mt-6">
                <h2 class="text-xl font-bold text-highlight-gold mb-3 border-b border-gray-600 pb-1">Tarefas da Sacristia</h2>
        `;

        // 4.1. Descri√ß√£o completa das tarefas
        dayData.tarefas.forEach((p, pIndex) => {
            tasksSectionHtml += `<p class="mb-2 text-sm md:text-base">
                <strong class="text-priest-blue">${p.nome}:</strong> ${p.desc}
            </p>`;
        });

        // 4.2. Checklist simplificado (usando apenas a primeira tarefa como item de checklist)
        tasksSectionHtml += '<div class="mt-4 border-t border-gray-700 pt-3 space-y-3">';

        dayData.tarefas.forEach((p, pIndex) => {
            // Pega apenas a primeira tarefa para o checklist principal do dia
            const mainTask = p.desc.split(',')[0].trim();
            const taskId = `task-${dayString}-${pIndex + 1}`;
            const isChecked = localStorage.getItem(taskId) === 'true';

            tasksSectionHtml += `
                <div>
                    <label class="flex items-center space-x-2 cursor-pointer text-gray-300 hover:text-white">
                        <input type="checkbox" id="${taskId}" ${isChecked ? 'checked' : ''}
                               class="form-checkbox h-5 w-5 text-green-500 bg-gray-600 border-gray-500 rounded focus:ring-green-500">
                        <span class="text-base">${p.nome}: ${mainTask}</span>
                    </label>
                </div>
            `;
        });

        tasksSectionHtml += '</div></div>';

        container.innerHTML = headerHtml + agendaTableHtml + tasksSectionHtml;

        // Anexa os listeners de eventos ap√≥s a inje√ß√£o do HTML
        attachEventListeners();
    }

    /**
     * Anexa os listeners de eventos para a persist√™ncia de dados (Checkboxes e Check-Buttons).
     */
    function attachEventListeners() {
        // Evento para Checkboxes (Tarefas di√°rias)
        document.querySelectorAll('input[type="checkbox"]').forEach(el => {
            el.addEventListener('change', function(e) {
                // Salva o estado usando localStorage
                localStorage.setItem(e.target.id, e.target.checked.toString());
            });
        });

        // Evento para Check-Buttons (Agenda/Missas)
        document.querySelectorAll('.check-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                const id = this.getAttribute('data-id');
                const wasChecked = this.classList.contains('checked');
                
                if (wasChecked) {
                    this.textContent = '‚òê';
                    this.classList.remove('checked', 'bg-green-600');
                    this.classList.add('bg-gray-600');
                    localStorage.setItem(id, 'false');
                } else {
                    this.textContent = '‚úì';
                    this.classList.add('checked', 'bg-green-600');
                    this.classList.remove('bg-gray-600');
                    localStorage.setItem(id, 'true');
                }
            });
        });
    }

    /**
     * Fun√ß√£o para gerar o relat√≥rio de status.
     */
    function generateReport() {
        const output = document.getElementById('report-output');
        let completedAgendas = 0;
        let totalAgendas = 0;
        let completedTasks = 0;
        let totalTasks = 0;
        let reportText = `Relat√≥rio da Agenda Paroquial de ${MONTH_NAME} ${YEAR}:\n\n`;

        // Itera sobre todos os dias do calend√°rio
        for (let day = 1; day <= MONTH_DAY_COUNT; day++) {
            const dayString = day.toString().padStart(2, '0');
            const data = dailySchedule[dayString];

            if (!data) continue;

            let dayReport = `üìÖ Dia ${dayString}:\n`;
            let dayHasCompletedItem = false;

            // 1. Agenda (Missas/Atendimentos)
            data.agenda.forEach((item, index) => {
                totalAgendas++;
                const taskId = `ag-${dayString}-${index + 1}`;
                const isCompleted = localStorage.getItem(taskId) === 'true';
                if (isCompleted) {
                    completedAgendas++;
                    dayReport += `   [‚úì] ${item.hora} - ${item.atividade} (${item.padre})\n`;
                    dayHasCompletedItem = true;
                }
            });

            // 2. Tarefas da Sacristia
            data.tarefas.forEach((p, pIndex) => {
                totalTasks++;
                const taskId = `task-${dayString}-${pIndex + 1}`;
                const mainTask = p.desc.split(',')[0].trim();
                const isCompleted = localStorage.getItem(taskId) === 'true';

                if (isCompleted) {
                    completedTasks++;
                    dayReport += `   [‚úì] Tarefa ${p.nome}: ${mainTask}\n`;
                    dayHasCompletedItem = true;
                }
            });

            if (dayHasCompletedItem) {
                reportText += dayReport + '\n';
            }
        }

        reportText += `--- Resumo Global (${MONTH_NAME} ${YEAR}) ---\n`;
        reportText += `‚úÖ Total de Itens de Agenda Conclu√≠dos: ${completedAgendas} de ${totalAgendas}\n`;
        reportText += `‚úÖ Total de Tarefas da Sacristia Conclu√≠das: ${completedTasks} de ${totalTasks}\n`;

        output.textContent = reportText;
        output.style.display = 'block';
    }


    /**
     * Inicia a aplica√ß√£o: determina o dia atual e carrega o conte√∫do.
     */
    function initializeApp() {
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();

        // Verifica se o dia atual √© Dezembro de 2025 (para usar a agenda fake)
        let startDay = 1; // Padr√£o: 1¬∫ dia do m√™s
        if (currentMonth === MONTH_INDEX && currentYear === YEAR) {
            startDay = today.getDate();
        } else {
             // Se n√£o for Dez/2025, vamos para o Dia 03, pois hoje (na simula√ß√£o) √© 03/12/2025.
             startDay = 3;
        }

        renderDateCarousel(startDay);
        // showDailyContent j√° √© chamado dentro de renderDateCarousel para o dia atual

        // Listener do Relat√≥rio
        document.getElementById('generate-report').addEventListener('click', generateReport);
    }

    // Inicia a aplica√ß√£o assim que o DOM estiver carregado
    document.addEventListener('DOMContentLoaded', initializeApp);

</script>

</body>
</html>
