<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚õ™ Sacristia - Agenda Paroquial Dezembro 2025</title>
    
    <link rel="manifest" href="/aparoquia/manifest.json">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a14">
    
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        // Configura√ß√£o Tailwind para cores lit√∫rgicas e tema escuro
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'background-dark': '#0a0a14',
                        'card-dark': '#141424',
                        'element-dark': '#2a2a4a',
                        'highlight-gold': '#ffd700', /* Corrigido para hex */
                        'priest-blue': '#4fc3f7',
                        // Mapeamento de Cores Lit√∫rgicas
                        'lit-roxo': '#6f42c1',
                        'lit-branco': '#ffffff',
                        'lit-rosa': '#e83e8c',
                        'lit-vermelho': '#dc3545',
                        'lit-verde': '#28a745', 
                    }
                }
            }
        }
    </script>
    <style>
        /* Estilo customizado para o carrossel e scrollbar (apenas visual) */
        #date-carousel {
            -webkit-overflow-scrolling: touch; 
            scrollbar-width: none; 
            scroll-behavior: smooth;
        }
        #date-carousel::-webkit-scrollbar {
            display: none; 
        }

        /* Anima√ß√£o para o dia selecionado */
        .date-item.selected {
            animation: pulse-ring 0.6s ease-out;
        }

        @keyframes pulse-ring {
            /* Usamos a cor padr√£o do highlight-gold aqui */
            0% { box-shadow: 0 0 0 0px rgba(255, 215, 0, 0.7); } 
            100% { box-shadow: 0 0 0 4px rgba(255, 215, 0, 0); }
        }
        
        /* Ajuste na seta de expans√£o */
        .rotate-180 {
            transform: rotate(180deg);
        }
        
        /* Estilo inicial do banner de instala√ß√£o (Oculto) */
        #install-banner {
            display: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-background-dark text-white p-2 sm:p-4 font-sans min-h-screen">

<div id="install-prompt-anchor"></div>

<div id="app-container" class="max-w-4xl mx-auto bg-card-dark p-4 md:p-8 rounded-xl shadow-2xl">
    <h1 id="main-title" class="text-center text-2xl md:text-3xl text-highlight-gold mb-6 font-extrabold tracking-wide transition-colors duration-300">
        Sacristia: Dezembro de 2025 - ano A
    </h1>

    <div id="date-carousel" class="flex overflow-x-scroll snap-x snap-mandatory pb-4 mb-4 space-x-3">
        </div>

    <div id="daily-content-container" class="mt-6">
        <p class="text-center text-gray-400">Carregando a agenda...</p>
    </div>

    <footer class="text-center mt-8 text-gray-500 text-sm p-4 border-t border-gray-700">
        Par√≥quia Nossa Senhora da Concei√ß√£o v6.8
    </footer>
</div>

<script>
    // --- VARI√ÅVEIS PWA PARA O POP-UP DE INSTALA√á√ÉO ---
    let deferredPrompt; 
    let installButtonVisible = false;

    // --- FUN√á√ïES PWA (CORRE√á√ÉO 2) ---

    // 1. Captura o evento do navegador que permite a instala√ß√£o
    window.addEventListener('beforeinstallprompt', (e) => {
        // Evita que o navegador mostre o prompt padr√£o imediatamente
        e.preventDefault(); 
        
        // Armazena o evento
        deferredPrompt = e;
        
        // Mostra o bot√£o ou pop-up customizado (se n√£o foi mostrado antes)
        if (!installButtonVisible) {
            showCustomInstallPrompt();
            installButtonVisible = true;
        }
    });

    // 2. Fun√ß√£o para mostrar o banner/pop-up customizado
    function showCustomInstallPrompt() {
        const anchor = document.getElementById('install-prompt-anchor');
        const bannerHtml = `
            <div id="install-banner" class="bg-priest-blue p-3 text-center rounded-lg mb-4 flex items-center justify-center space-x-4 shadow-lg mx-auto max-w-4xl">
                <span class="font-semibold text-gray-900">üîî Quer acessar mais r√°pido? Instale a Sacristia como App!</span>
                <button onclick="installPWA()" class="bg-highlight-gold hover:bg-yellow-500 text-gray-900 font-bold py-1 px-3 rounded-full text-sm transition duration-200">
                    Instalar Agora
                </button>
            </div>
        `;
        if (anchor) {
            anchor.innerHTML = bannerHtml;
            document.getElementById('install-banner').style.display = 'flex'; // Torna vis√≠vel
        }
    }

    // 3. Fun√ß√£o chamada pelo bot√£o customizado para disparar a instala√ß√£o
    function installPWA() {
        if (deferredPrompt) {
            // Dispara o pop-up NATIVO do navegador
            deferredPrompt.prompt(); 
            
            // Monitora a escolha do usu√°rio
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('Instala√ß√£o aceita!');
                } else {
                    console.log('Instala√ß√£o recusada.');
                }
                // Remove o banner/bot√£o ap√≥s a tentativa (aceita ou recusada)
                const banner = document.getElementById('install-banner');
                if (banner) banner.remove();
                deferredPrompt = null;
            });
        }
    }

    // Configura√ß√µes de M√™s/Ano e Dados (Restante do seu c√≥digo)
    const MONTH_DAY_COUNT = 31;
    const MONTH_INDEX = 11; // 0 = Janeiro, 11 = Dezembro
    const YEAR = 2025;
    const MONTH_NAME = "Dezembro";
    const weekDays = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];

    // Lista Padr√£o de Itens Lit√∫rgicos para as Missas Setoriais (EXCLUINDO Lecion√°rio)
    const LiturgicalItemsBase = [
        'H√≥stia G', 'H√≥stia P', 'Vinho', '√Ågua', 'Missal', 
        'Corporal', 'Sangu√≠neo', 'Pala', 'C√°lice', 'Patena', '√Çmbula', 'Coleta'
    ];
    // Tipos de Lecion√°rio
    const LecionarioTypes = ['Semanal', 'Dominical', 'Santoral'];

    // Estrutura de Dados (Seu JSON de Agendamentos e Tarefas)
    const dailySchedule = { /* ... (Seu JSON de agendamentos) ... */ 
        // Dia 01
        "01": {
            liturgia: { text: "2¬™-feira da 1¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "4¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar, Lavar banheiro sacristia, Lavar alfaia e toalhas, Higienizar vasos" },
                { nome: "Pietro", desc: "Varrer passeio da matriz, Lavar banheiro social, Passar alfaia, Mala de missas, Higienizar vasos das malas, Aguar jardim" },
            ]
        },
        // Dia 02
        "02": {
            liturgia: { text: "3¬™-feira da 1¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Morangal", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "5¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { nome: "Pietro", desc: "Manter trancado (exceto quinta), Passar t√∫nicas, Mala de missas, Higienizar vasos das malas" },
            ]
        },
        // Dia 03
        "03": {
            liturgia: { text: "S. Francisco Xavier, presb√≠tero (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 6 ‚Äì Bairro Torres", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "6¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz, Limpar imagens e altares (1¬™/3¬™ quarta), Passar alfaia, Arm√°rio sacristia, Higienizar vasos, Aguar jardim" },
            ]
        },
        // Dia 04
        "04": {
            liturgia: { text: "S. B√°rbara, virgem e m√°rtir (Mem√≥ria)", color: "lit-vermelho" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Visita aos enfermos", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Vargem Alegre ‚Äì Formatura", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "7¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro, escadaria e batist√©rio, Passar vestes de leitores e toalha do altar, Higienizar vasos" },
                { nome: "Pietro", desc: "Varrer passeio da matriz, Manter trancado (exceto hoje), Limpar imagens e altares, Passar alfaia, Mala de missas, Higienizar vasos, Aguar jardim" },
            ]
        },
        // Dia 05
        "05": {
            liturgia: { text: "6¬™-feira da 1¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "8¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
                { hora: "-----", atividade: "Compromisso", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar, Lavar banheiro sacristia, Lavar alfaia e toalhas, Higieniza√ß√£o geral dos vasos sagrados" },
                { nome: "Pietro", desc: "Lavar banheiro social, Passar alfaia, Mala de missas, Higienizar vasos das malas, Aguar jardim" },
            ]
        },
        // Dia 06
        "06": {
            liturgia: { text: "S. Nicolau, bispo (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "11:00", atividade: "Casamento - Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Vig√≠lia Batismal", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "9¬∫ dia da Novena", padre: "Pe. Erick", highlight: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz (jogar √°gua), Passar alfaia, Mala de missas, Higienizar vasos das malas" },
            ]
        },
        // Dia 07
        "07": {
            liturgia: { text: "2¬∫ DOMINGO DO ADVENTO", color: "lit-roxo" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "08:00", atividade: "Santa Missa Setor 6 ‚Äì Bairro S√£o Jos√© da Mantiqueira - Confiss√£o Crismando", padre: "Pe. Erick", isSetorMass: true },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Batizado ‚Äì Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:30", atividade: "Santa Missa Setor 7 ‚Äì Bairro Rio Acima II", padre: "Pe. Erick", isSetorMass: true },
                { hora: "16:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Retirinho", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "Primeiras V√©speras", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 08
        "08": {
            liturgia: { text: "IMACULADA CONCEI√á√ÉO DA BEM-AVENTURADA VIRGEM MARIA (Solenidade)", color: "lit-branco" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Roseirinha", padre: "Pe. Erick", isSetorMass: true },
                { hora: "10:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Aylton" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar (se n√£o for folga)" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 09
        "09": {
            liturgia: { text: "2¬™-feira da 2¬™ Semana do Advento (S. Juan Diego Cuauhtlatoatzin)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 3 ‚Äì Bairro Corr√™ias", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { hora: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 10
        "10": {
            liturgia: { text: "3¬™-feira da 2¬™ Semana do Advento (N. Sra de Loreto)", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Palmeiras", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 11
        "11": {
            liturgia: { text: "S. D√¢maso I, Papa (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos - Bairro Marques", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Marques", padre: "Pe. Erick", isSetorMass: true },
                { hora: "17:00", atividade: "Confiss√£o ‚Äì Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Adora√ß√£o ‚Äì Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 12
        "12": {
            liturgia: { text: "4¬™-feira da 2¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "15:00", atividade: "Confiss√µes crismandos ‚Äì Bairro Roseirinha", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Serra Verde", padre: "Pe. Erick", isSetorMass: true },
                { hora: "19:00", atividade: "Santa Missa Setor 2 ‚Äì Bairro Ribeir√£o", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Lavar banheiro social" },
            ]
        },
        // Dia 13
        "13": {
            liturgia: { text: "S. Luzia, Virgem e M√°rtir (Mem√≥ria)", color: "lit-vermelho" },
            agenda: [
                { hora: "05:00", atividade: "Prociss√£o e Santa Missa Igreja Santa Luzia", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos - Bairro Serra Verde", padre: "Pe. Erick" },
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 14
        "14": {
            liturgia: { text: "3¬∫ DOMINGO DO ADVENTO (Gaudete)", color: "lit-rosa" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Setor 3 ‚Äì Bairro Mogiano", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "11:00", atividade: "Santa Missa Hotel", padre: "Pe. Erick" },
                { hora: "18:00", atividade: "Santa Missa Setor 4 ‚Äì Bairro Moreiras", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 15
        "15": {
            liturgia: { text: "2¬™-feira da 3¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Visita peregrina da Imagem N. Sra da Concei√ß√£o e Santa Missa", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 16
        "16": {
            liturgia: { text: "3¬™-feira da 3¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Mendes", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "Forma√ß√£o MESC", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { hora: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 17
        "17": {
            liturgia: { text: "4¬™-feira da 3¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 18
        "18": {
            liturgia: { text: "5¬™-feira da 3¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Confiss√µes crismandos ‚Äì Matriz", padre: "Pe. Erick" },
                { hora: "17:00", atividade: "Confiss√µes Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:00", atividade: "Adora√ß√£o Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Muqu√©m", padre: "Pe. Erick", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 19
        "19": {
            liturgia: { text: "6¬™-feira da 3¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 2 ‚Äì Bairro Porto", padre: "Pe. Erick", isSetorMass: true },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Pouso Frio", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Lavar banheiro social" },
            ]
        },
        // Dia 20
        "20": {
            liturgia: { text: "S√°bado da 3¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "10:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Virgem do Socorro", padre: "Pe. Erick", isSetorMass: true },
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 21
        "21": {
            liturgia: { text: "4¬∫ DOMINGO DO ADVENTO", color: "lit-roxo" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Retiro dos Marins", padre: "Pe. Erick", isSetorMass: true },
                { hora: "11:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Retirinho", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "18:00", atividade: "Santa Missa Setor 4 ‚Äì Bairro Moreiras", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 22
        "22": {
            liturgia: { text: "2¬™-feira da 4¬™ Semana do Advento", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Abrigo S√£o Camilo", padre: "Pe. Erick" },
                { hora: "14:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 23
        "23": {
            liturgia: { text: "S. Jo√£o C√¢ncio, presb√≠tero (Mem√≥ria)", color: "lit-roxo" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 5 ‚Äì Bairro Marques", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { hora: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 24
        "24": {
            liturgia: { text: "4¬™-feira da 4¬™ Semana do Advento (V√©spera de Natal)", color: "lit-roxo" },
            agenda: [
                { hora: "17:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 6 ‚Äì Bairro S√£o Jos√© da Mantiqueira", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "20:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "21:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Roseirinha", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 25
        "25": {
            liturgia: { text: "NATAL DE NOSSO SENHOR JESUS CRISTO (Solenidade)", color: "lit-branco" },
            agenda: [
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Rio Acima II", padre: "Pe. Erick", isSetorMass: true },
                { hora: "11:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Mendes", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Limpar coro" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 26
        "26": {
            liturgia: { text: "S. Estev√£o, Protom√°rtir (Festa)", color: "lit-vermelho" },
            agenda: [
                { hora: "09:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Sagrado Cora√ß√£o de Jesus", padre: "Pe. Erick" },
                { hora: "19:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Roseira", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Lavar banheiro social" },
            ]
        },
        // Dia 27
        "27": {
            liturgia: { text: "S. Jo√£o, Ap√≥stolo e Evangelista (Festa)", color: "lit-branco" },
            agenda: [
                { hora: "16:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "18:00", atividade: "Santa Missa Hotel", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Rastelar jardim" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 28
        "28": {
            liturgia: { text: "SAGRADA FAM√çLIA DE JESUS, MARIA E JOS√â (Festa)", color: "lit-branco" },
            agenda: [
                { hora: "07:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Santa Missa Setor 3 ‚Äì Bairro Corr√™ias", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "09:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "10:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Rio Acima II", padre: "Pe. Erick", isSetorMass: true },
                { hora: "16:00", atividade: "Santa Missa Setor 1 ‚Äì Bairro Retirinho", padre: "Pe. Edimilson", isSetorMass: true },
                { hora: "19:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Higienizar vasos" },
                { nome: "Pietro", desc: "Mala de missas" },
            ]
        },
        // Dia 29
        "29": {
            liturgia: { text: "S. Tom√°s Becket, Bispo e M√°rtir (Oitava do Natal)", color: "lit-vermelho" },
            agenda: [
                { hora: "-----", atividade: "Folga", padre: "Pe. Edimilson" },
                { hora: "09:00", atividade: "Visita √†s obras", padre: "Pe. Erick" },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Varrer e limpar" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
        // Dia 30
        "30": {
            liturgia: { text: "6¬∫ Dia da Oitava do Natal", color: "lit-branco" },
            agenda: [
                { hora: "14:00", atividade: "Atendimento", padre: "Pe. Edimilson" },
                { hora: "19:00", atividade: "Santa Missa Setor 7 ‚Äì Bairro Palmeiras", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Lavar vestes de leitores" },
                { hora: "Pietro", desc: "Manter trancado" },
            ]
        },
        // Dia 31
        "31": {
            liturgia: { text: "S. Silvestre I, Papa (7¬∫ Dia da Oitava do Natal)", color: "lit-branco" },
            agenda: [
                { hora: "17:00", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Edimilson" },
                { hora: "18:30", atividade: "Adora√ß√£o Igreja Matriz", padre: "Pe. Erick" },
                { hora: "19:30", atividade: "Santa Missa Igreja Matriz", padre: "Pe. Erick" },
                { hora: "19:30", atividade: "Santa Missa Setor 7 ‚Äì Bairro Vargem Alegre", padre: "Pe. Edimilson", isSetorMass: true },
            ],
            tarefas: [
                { nome: "Emanuel", desc: "Folga" },
                { nome: "Pietro", desc: "Varrer passeio da matriz" },
            ]
        },
    };

    // --- FUN√á√ïES DE RENDERIZA√á√ÉO E NAVEGA√á√ÉO (Sem altera√ß√µes significativas) ---

    function getLiturgicalColorClasses(colorKey) {
        switch (colorKey) {
            case 'lit-roxo': return 'bg-lit-roxo text-white';
            case 'lit-branco': return 'bg-lit-branco text-gray-900 shadow-lg';
            case 'lit-rosa': return 'bg-lit-rosa text-white';
            case 'lit-vermelho': return 'bg-lit-vermelho text-white';
            case 'lit-verde': return 'bg-lit-verde text-white';
            default: return 'bg-gray-800 text-white';
        }
    }

    function getSelectedDateClasses(colorKey) {
        let bgColor, textColor, ringColor;
        
        // Define as classes de destaque do dia.
        switch (colorKey) {
            case 'lit-roxo': 
                bgColor = 'bg-lit-roxo';
                textColor = 'text-white';
                ringColor = 'ring-lit-roxo';
                break;
            case 'lit-branco': 
                bgColor = 'bg-lit-branco'; 
                textColor = 'text-gray-900'; 
                ringColor = 'ring-lit-branco';
                break;
            case 'lit-rosa': 
                bgColor = 'bg-lit-rosa'; 
                textColor = 'text-white'; 
                ringColor = 'ring-lit-rosa';
                break;
            case 'lit-vermelho': 
                bgColor = 'bg-lit-vermelho'; 
                textColor = 'text-white'; 
                ringColor = 'ring-lit-vermelho';
                break;
            case 'lit-verde': 
                bgColor = 'bg-lit-verde'; 
                textColor = 'text-white'; 
                ringColor = 'ring-lit-verde';
                break;
            default: 
                bgColor = 'bg-highlight-gold'; 
                textColor = 'text-gray-900'; 
                ringColor = 'ring-highlight-gold';
        }
        
        return `${bgColor} ${textColor} ring-2 ${ringColor} ring-offset-2 ring-offset-card-dark`;
    }

    function renderDateCarousel(todayDay) {
        const carousel = document.getElementById('date-carousel');
        carousel.innerHTML = ''; 
        
        for (let day = 1; day <= MONTH_DAY_COUNT; day++) {
            const date = new Date(YEAR, MONTH_INDEX, day);
            const dayOfWeekIndex = date.getDay();
            const dayOfWeekShort = weekDays[dayOfWeekIndex];
            const dayString = day.toString().padStart(2, '0');

            const isToday = (day === todayDay) && (date.getMonth() === MONTH_INDEX) && (date.getFullYear() === YEAR);
            
            const selectedClass = isToday ? 'selected' : '';
            const defaultClasses = 'bg-element-dark text-gray-300 hover:bg-gray-700';
            const snapClass = 'snap-start';

            const itemHtml = `
                <div id="date-${dayString}"
                     class="date-item ${snapClass} ${selectedClass}
                            min-w-[80px] text-center px-2 py-3 rounded-xl cursor-pointer transition-all duration-200
                            font-semibold text-sm shadow-md flex-shrink-0
                            ${defaultClasses}"
                     data-dia="${dayString}">
                    <div class="text-xl">${dayString}</div>
                    <div class="text-xs font-normal">${dayOfWeekShort}</div>
                </div>
            `;
            carousel.insertAdjacentHTML('beforeend', itemHtml);
        }

        // Adiciona listeners de clique
        document.querySelectorAll('.date-item').forEach(btn => {
            btn.addEventListener('click', function() {
                const day = this.getAttribute('data-dia');
                showDailyContent(day);
                scrollToCenter(this);
            });
        });

        // Foca e exibe o conte√∫do do dia atual
        if (todayDay) {
            const todayElement = document.getElementById(`date-${todayDay.toString().padStart(2, '0')}`);
            if (todayElement) {
                showDailyContent(todayDay.toString().padStart(2, '0'));
                setTimeout(() => scrollToCenter(todayElement), 150);
            }
        }
    }

    function scrollToCenter(element) {
        const container = document.getElementById('date-carousel');
        const containerWidth = container.offsetWidth;
        const elementWidth = element.offsetWidth;
        const elementOffset = element.offsetLeft;

        const scrollPosition = elementOffset - (containerWidth / 2) + (elementWidth / 2);

        container.scrollTo({
            left: scrollPosition,
            behavior: 'smooth'
        });
    }

    function showDailyContent(dayString) {
        const container = document.getElementById('daily-content-container');
        container.innerHTML = ''; // Limpa o conte√∫do anterior

        const dayData = dailySchedule[dayString];

        // 1. Limpa todas as classes de cor do t√≠tulo principal H1
        const mainTitle = document.getElementById('main-title');
        const allColorClasses = ['text-lit-roxo', 'text-lit-branco', 'text-lit-rosa', 'text-lit-vermelho', 'text-lit-verde', 'text-highlight-gold'];
        if (mainTitle) {
            mainTitle.classList.remove(...allColorClasses);
        }

        // 2. Atualiza a sele√ß√£o visual do carrossel
        document.querySelectorAll('.date-item').forEach(b => {
            // Remove todas as classes de destaque do carrossel 
            const allCarouselClasses = ['selected', 'bg-lit-roxo', 'bg-lit-branco', 'bg-lit-rosa', 'bg-lit-vermelho', 'bg-lit-verde', 'bg-highlight-gold', 'text-gray-900', 'text-white', 'ring-2', 'ring-lit-roxo', 'ring-lit-branco', 'ring-lit-rosa', 'ring-lit-vermelho', 'ring-lit-verde', 'ring-highlight-gold', 'ring-offset-2', 'ring-offset-card-dark'];
            b.classList.remove(...allCarouselClasses);
            b.classList.add('bg-element-dark', 'text-gray-300');
        });

        const selectedBtn = document.getElementById(`date-${dayString}`);
        if (selectedBtn) {
            const colorKey = dayData.liturgia.color;
            const selectedClasses = getSelectedDateClasses(colorKey);
            
            // Aplica as novas classes de destaque ao bot√£o selecionado
            selectedBtn.classList.add('selected', ...selectedClasses.split(' '));
            selectedBtn.classList.remove('bg-element-dark', 'text-gray-300', 'hover:bg-gray-700');

            // 3. ATUALIZA A COR DO T√çTULO PRINCIPAL (H1)
            let titleColorClass = `text-${colorKey}`;
            
            // Para "lit-branco" ou "lit-rosa", usamos o Dourado para contraste no fundo escuro principal.
            if (colorKey === 'lit-branco' || colorKey === 'lit-rosa') {
                titleColorClass = 'text-highlight-gold';
            }
            mainTitle.classList.add(titleColorClass);
        }

        if (!dayData) {
            container.innerHTML = `<p class="text-center text-red-400 mt-8">Nenhuma agenda encontrada para o dia ${dayString} de ${MONTH_NAME}.</p>`;
            return;
        }

        // 4. Header Lit√∫rgico 
        const colorClasses = getLiturgicalColorClasses(dayData.liturgia.color);
        const headerHtml = `
            <div class="p-4 md:p-5 mb-6 rounded-xl font-bold text-center text-lg shadow-xl ${colorClasses}">
                ${dayData.liturgia.text}
            </div>
        `;

        // 5. Tabela de Agenda 
        let agendaTableHtml = `
            <h2 class="text-xl font-bold text-highlight-gold mb-3 border-b border-gray-700 pb-1">Agenda do Dia</h2>
            <div class="overflow-x-auto rounded-xl shadow-lg border border-gray-700">
                <table class="min-w-full text-sm">
                    <thead>
                        <tr class="bg-gray-700 text-highlight-gold">
                            <th class="p-3 whitespace-nowrap">Hora</th>
                            <th class="p-3">Atividade</th>
                            <th class="p-3">Padre</th>
                        </tr>
                    </thead>
                    <tbody>
        `;

        dayData.agenda.forEach((item, index) => {
            const rowClass = index % 2 === 0 ? 'bg-gray-800' : 'bg-gray-900';
            const highlightClass = item.highlight ? 'bg-yellow-900 text-highlight-gold font-semibold' : '';

            const isSetorMass = item.isSetorMass;
            const toggleId = `mass-details-${dayString}-${index}`;

            let activityCell;
            
            // Se for Missa Setorial, a c√©lula de atividade vira o bot√£o de expans√£o
            if (isSetorMass) {
                activityCell = `
                    <td class="p-1">
                        <div class="p-2 flex justify-between items-center w-full cursor-pointer rounded-lg bg-gray-700/50 hover:bg-gray-700 transition duration-150" data-toggle-id="${toggleId}">
                            <span class="${highlightClass} font-semibold text-gray-300 hover:text-white">${item.atividade}</span>
                            <span class="text-xs transition-transform duration-300 transform" id="arrow-${toggleId}">‚ñº</span>
                        </div>
                    </td>
                `;
                
                // Checklist de Prepara√ß√£o Lit√∫rgica (Detalhe Oculto)
                let checklistHtml = '';
                LiturgicalItemsBase.forEach((itemName, itemIndex) => {
                    const checklistId = `lit-${dayString}-${index}-${itemIndex}`; 
                    const isChecked = localStorage.getItem(checklistId) === 'true';
                    checklistHtml += `
                        <div class="flex items-center space-x-2 p-1 border-b border-gray-600 last:border-b-0">
                            <label class="flex items-center space-x-2 cursor-pointer text-sm text-gray-200 w-full">
                                <input type="checkbox" id="${checklistId}" ${isChecked ? 'checked' : ''}
                                        class="form-checkbox h-4 w-4 text-priest-blue bg-gray-600 border-gray-500 rounded focus:ring-priest-blue">
                                <span>${itemName}</span>
                            </label>
                        </div>
                    `;
                });

                // Checklist do Lecion√°rio
                let lecionarioHtml = '';
                LecionarioTypes.forEach((option, idx) => {
                    const lecionarioId = `lec-${dayString}-${index}-${idx}`;
                    const isChecked = localStorage.getItem(lecionarioId) === 'true';
                    lecionarioHtml += `
                        <label class="flex items-center space-x-2 cursor-pointer text-sm text-gray-200 w-full">
                            <input type="checkbox" id="${lecionarioId}" ${isChecked ? 'checked' : ''}
                                class="form-checkbox h-4 w-4 text-green-500 bg-gray-600 border-gray-500 rounded focus:ring-green-500">
                            <span>${option}</span>
                        </label>
                    `;
                });


                // Insere a linha principal da agenda
                agendaTableHtml += `
                    <tr class="${rowClass} hover:bg-gray-700 transition duration-150">
                        <td class="p-2 whitespace-nowrap">${item.hora}</td>
                        ${activityCell}
                        <td class="p-2 text-priest-blue font-semibold whitespace-nowrap">${item.padre}</td>
                    </tr>
                `;

                // Insere a linha de detalhe expand√≠vel IMEDIATAMENTE AP√ìS a linha principal
                agendaTableHtml += `
                    <tr id="${toggleId}" class="expanded-detail bg-gray-900/70 border-t border-gray-700 hidden">
                        <td colspan="3" class="p-3">
                            <div class="font-bold text-highlight-gold mb-2 text-sm">üéí Prepara√ß√£o Lit√∫rgica (Mala de Missa):</div>
                            <div class="grid grid-cols-2 gap-x-4 gap-y-2">
                                ${checklistHtml}
                            </div>
                            <div class="font-bold text-highlight-gold mb-2 text-sm mt-3 border-t border-gray-600 pt-3">
                                üìñ Lecion√°rio (Qual levado?):
                            </div>
                            <div class="space-y-2">
                                ${lecionarioHtml}
                            </div>
                        </td>
                    </tr>
                `;
            } else {
                // Atividade normal (n√£o missa setorial)
                activityCell = `<td class="p-2 ${highlightClass} text-base">${item.atividade}</td>`;

                 // Insere a linha normal da agenda
                agendaTableHtml += `
                    <tr class="${rowClass} hover:bg-gray-700 transition duration-150">
                        <td class="p-2 whitespace-nowrap">${item.hora}</td>
                        ${activityCell}
                        <td class="p-2 text-priest-blue font-semibold whitespace-nowrap">${item.padre}</td>
                    </tr>
                `;
            }

        });
        
        agendaTableHtml += `
                    </tbody>
                </table>
            </div>
        `;

        // 6. Se√ß√£o de Tarefas da Sacristia
        let tasksSectionHtml = `
            <div class="bg-gray-800 p-4 rounded-xl shadow-lg mt-6">
                <h2 class="text-xl font-bold text-highlight-gold mb-3 border-b border-gray-600 pb-1">Tarefas da Sacristia (Emanuel & Pietro)</h2>
        `;

        // 6.1. Descri√ß√£o completa das tarefas
        dayData.tarefas.forEach((p, pIndex) => {
            tasksSectionHtml += `<p class="mb-2 text-sm md:text-base">
                <strong class="text-priest-blue">${p.nome}:</strong> ${p.desc}
            </p>`;
        });

        // 6.2. Checklist simplificado
        tasksSectionHtml += '<div class="mt-4 border-t border-gray-700 pt-3 space-y-3">';

        dayData.tarefas.forEach((p, pIndex) => {
            const mainTask = p.desc.split(',')[0].trim();
            const taskId = `task-${dayString}-${pIndex + 1}`;
            const isChecked = localStorage.getItem(taskId) === 'true';

            tasksSectionHtml += `
                <div>
                    <label class="flex items-center space-x-2 cursor-pointer text-gray-300 hover:text-white">
                        <input type="checkbox" id="${taskId}" ${isChecked ? 'checked' : ''}
                               class="form-checkbox h-5 w-5 text-green-500 bg-gray-600 border-gray-500 rounded focus:ring-green-500">
                        <span class="text-base">${p.nome}: ${mainTask}</span>
                    </label>
                </div>
            `;
        });

        tasksSectionHtml += '</div></div>';

        container.innerHTML = headerHtml + agendaTableHtml + tasksSectionHtml;

        // Anexa os listeners de eventos ap√≥s a inje√ß√£o do HTML
        attachEventListeners();
    }

    function attachEventListeners() {
        // Evento 1: Checkboxes de Tarefas da Sacristia e Itens Lit√∫rgicos (salva em localStorage)
        document.querySelectorAll('input[type="checkbox"]').forEach(el => {
            el.addEventListener('change', function(e) {
                // Salva o estado usando localStorage
                localStorage.setItem(e.target.id, e.target.checked.toString());
            });
        });

        // Evento 2: Toggle para expans√£o do Checklist Lit√∫rgico 
        document.querySelectorAll('[data-toggle-id]').forEach(cell => {
            cell.addEventListener('click', function() {
                const toggleId = this.getAttribute('data-toggle-id');
                const detailRow = document.getElementById(toggleId);
                const arrow = document.getElementById(`arrow-${toggleId}`);
                
                // VERIFICA√á√ÉO DE SEGURAN√áA: Garante que o elemento existe antes de tentar acessar classList
                if (detailRow) { 
                    // Toggle visibility
                    if (detailRow.classList.contains('hidden')) {
                        detailRow.classList.remove('hidden');
                        arrow.classList.add('rotate-180');
                    } else {
                        detailRow.classList.add('hidden');
                        arrow.classList.remove('rotate-180');
                    }
                }
            });
        });
    }

    function initializeApp() {
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();

        // Determina o dia de in√≠cio (Dia atual se estiver em Dez/2025, sen√£o Dia 3 para simula√ß√£o)
        let startDay = 1; 
        if (currentMonth === MONTH_INDEX && currentYear === YEAR) {
            startDay = today.getDate();
        } else {
           startDay = 3;
        }

        renderDateCarousel(startDay);
    }

    // Inicia a aplica√ß√£o assim que o DOM estiver carregado
    document.addEventListener('DOMContentLoaded', initializeApp);

</script>

<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            // ATEN√á√ÉO: Se o caminho do seu reposit√≥rio for diferente de '/aparoquia/', corrija aqui.
            navigator.serviceWorker.register('/aparoquia/sw.js') 
                .then(registration => {
                    console.log('Service Worker da Sacristia registrado com sucesso!', registration.scope);
                })
                .catch(error => {
                    console.error('Falha no registro do Service Worker da Sacristia:', error);
                });
        });
    }
</script>

</body>
</html>
